# AGENTS.md

## このリポジトリについて
本リポジトリは、Spring Boot を利用した **Common（共通）ライブラリプロジェクト**です。  
複数の業務アプリケーションから参照されることを前提とし、  
再利用可能な共通処理・共通定義を提供することを目的としています。

本プロジェクトは **単体で業務ロジックやAPIを持ちません**。

---

## 技術スタック
- Java 17
- Spring Boot 3.x
- Maven
- PostgreSQL（本番想定DB）
- MyBatis
- MyBatis Generator
- OpenAPI（型・定義参照用として利用する場合あり）

---

## プロジェクトの責務
本プロジェクトが提供してよいもの：
- 共通DTO / 共通Entity
- MyBatis Generator により生成されたクラス
- 共通Mapperインターフェース
- 共通ユーティリティクラス
- 共通例外クラス
- 共通定数定義

本プロジェクトが **提供してはいけないもの**：
- 業務固有のロジック
- 業務ルールを含む判定処理
- Controller / REST API
- アプリケーション起動用クラス

---

## アーキテクチャ方針
- 本プロジェクトは **ライブラリとして利用される前提**とする
- Spring Boot の自動起動は行わない
- Bean定義は最小限にとどめる
- 依存関係は可能な限り軽量に保つ

---

## データベース方針
- PostgreSQL を前提とする
- H2 固有の挙動に依存しないこと
- SQL は PostgreSQL 互換で記述する
- MyBatis Generator により生成されたコードは原則として直接修正しない
- カスタマイズが必要な場合は、拡張クラスや別Mapperで対応する

---

## MyBatis Generator ルール
- Generator の設定ファイルを正とする
- 生成物の手動修正は禁止
- 再生成に耐えられる構成とする
- Example クラス・Mapper は用途を理解した上で利用する
- Generator の設定変更は影響範囲を確認してから行うこと

---

## コーディングルール
- 共通ライブラリとしての責務を常に意識する
- 破壊的変更（public API変更）は慎重に行う
- 命名規則・パッケージ構成は既存に合わせる
- 過剰な共通化・抽象化を行わない
- Lombok の使用はプロジェクト方針に従うこと

---

## テスト方針
- 単体テストは必須ではないが、ロジックを含む場合は作成する
- DB接続を前提としたテストは行わない
- テストコードは利用側アプリケーションで補完することを前提とする

---

## ビルド
- ビルド: mvn clean package
- 本プロジェクト単体での起動は行わない

---

## AIエージェントへの制約
- 業務ロジックを追加しないこと
- Controller や API を作成しないこと
- 勝手に依存関係を追加しないこと
- MyBatis Generator の生成物を直接修正しないこと
- 共通ライブラリの責務を逸脱する変更は行わないこと
- 判断に迷う場合は推測せず、必ず確認すること
